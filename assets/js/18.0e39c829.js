(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{525:function(e,t,a){"use strict";a.r(t);var n=a(2),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"时序图说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#时序图说明"}},[e._v("#")]),e._v(" 时序图说明")]),e._v(" "),a("h3",{attrs:{id:"uml图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uml图"}},[e._v("#")]),e._v(" uml图")]),e._v(" "),a("p",[e._v("UML-Unified Modeling Language "),a("a",{attrs:{href:"https://baike.baidu.com/item/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80/3160571",target:"_blank",rel:"noopener noreferrer"}},[e._v("统一建模语言"),a("OutboundLink")],1),e._v("，又称"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E6%A0%87%E5%87%86%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80/10967573",target:"_blank",rel:"noopener noreferrer"}},[e._v("标准建模语言"),a("OutboundLink")],1),e._v("。是用来对软件密集系统进行可视化"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E5%BB%BA%E6%A8%A1",target:"_blank",rel:"noopener noreferrer"}},[e._v("建模"),a("OutboundLink")],1),e._v("的一种语言。UML的定义包括UML语义和UML表示法两个元素。")]),e._v(" "),a("p",[e._v("uml图有以下几种：")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/sequence-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("顺序图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/use-case-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("用例图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/class-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("类图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/object-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("对象图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/component-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("组件图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/deployment-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("部署图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/state-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("状态图"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://plantuml.com/zh/timing-diagram",target:"_blank",rel:"noopener noreferrer"}},[e._v("时序图"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"时序图简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#时序图简介"}},[e._v("#")]),e._v(" 时序图简介")]),e._v(" "),a("h4",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),a("blockquote",[a("p",[e._v("时序图是一种“统一建模语言”(UML) 图，用来说明参与交互的 对象之间传递的消息的顺序。\n时序图由一组用生命线表示的对象以及这些对象在交互期间交换的消息组成。\n时序图显示在对象之间传递的消息的顺序。时序图还可以显示对象之间的控制结构。\n例如，用于银行方案的时序图中的生命线可以表示客户、银行出纳或银行经理。客户、银行出纳和银行经理之间的通信由他们之间互相传递的消息表示。时序图显示对象和在对象之间传递的消息。")])]),e._v(" "),a("h4",{attrs:{id:"组成元素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组成元素"}},[e._v("#")]),e._v(" 组成元素")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[e._v("时序图的组成元素主要有5种：")]),e._v(" "),a("ol",[a("li",[a("p",[a("strong",[e._v("角色(Actor)")]),e._v("    系统角色，可以是人或者其他系统和子系统，以一个小人图标表示。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("对象(Object)")]),e._v("  对象位于时序图的顶部，以一个矩形表示。对象的命名方式一般有三种：")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("对象名和类名")]),e._v("  例如：华为手机:手机。")]),e._v(" "),a("li",[e._v("只显示类名，不显示对象，即为一个匿名对象。例如：:手机，在时序图中，用“：类”表示。")]),e._v(" "),a("li",[e._v("只显示对象名，不显示类名。例如：华为手机:，在时序图中，用“对象:”表示。")])])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("生命线(LifeLine)")]),e._v("  时序图中每个对象和底部中心都有一条垂直的虚线，这就是对象的生命线(对象的时间线)，以一条垂直的虚线表示。对象间的消息存在于两条虚线间。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("激活期(Activation)")]),e._v("  又叫控制焦点，它代表时序图中在对象时间线上某段时期执行的操作，以一个很窄的矩形表示。")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("消息(Message)")]),e._v("   表示对象之间发送的信息。消息分为三种类型。")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("同步消息(Synchronous Message)")]),e._v("  消息的发送者把控制传递给消息的接收者，然后停止活动，等待消息的接收者放弃或者返回控制。用来表示同步的意义，以一条实线和实心箭头表示。")]),e._v(" "),a("li",[a("strong",[e._v("异步消息(Asynchronous Message)")]),e._v(" 消息发送者通过消息把信号传递给消息的接收者，然后继续自己的活动，不等待接受者返回消息或者控制。异步消息的接收者和发送者是并发工作的，以一条实线和大于号表示。")]),e._v(" "),a("li",[a("strong",[e._v("返回消息(Return Message)")]),e._v("   返回消息表示从过程调用返回，以小于号和虚线表示")])])])])]),e._v(" "),a("h3",{attrs:{id:"插件安装（plantuml）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件安装（plantuml）"}},[e._v("#")]),e._v(" 插件安装（"),a("strong",[e._v("PlantUML")]),e._v("）")]),e._v(" "),a("p",[e._v("绘制时序图的工具有很多，我这边选用的是"),a("code",[e._v("plantuml")]),e._v("组件，官方地址为："),a("code",[e._v("https://plantuml.com/zh/")])]),e._v(" "),a("p",[a("code",[e._v("idea")]),e._v(" 和 "),a("code",[e._v("vscode")]),e._v(" 在插件商店中搜索 "),a("code",[e._v("plantuml")]),e._v("安装插件")]),e._v(" "),a("h4",{attrs:{id:"idea-plantuml-插件安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#idea-plantuml-插件安装"}},[e._v("#")]),e._v(" idea  "),a("em",[e._v("PlantUML")]),e._v(" 插件安装")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cyi113.oss-cn-shanghai.aliyuncs.com/static/typora-user-images/sequencediagram7.png",alt:"image-20220610165241533"}})]),e._v(" "),a("h4",{attrs:{id:"vscode-plantuml-插件安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode-plantuml-插件安装"}},[e._v("#")]),e._v(" VSCode  "),a("em",[e._v("PlantUML")]),e._v(" 插件安装")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cyi113.oss-cn-shanghai.aliyuncs.com/static/typora-user-images/sequencediagram5.png",alt:"image-20220610165312489"}})]),e._v(" "),a("h3",{attrs:{id:"样例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样例"}},[e._v("#")]),e._v(" 样例")]),e._v(" "),a("h4",{attrs:{id:"draw-io-processon-工具绘制的时序图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#draw-io-processon-工具绘制的时序图"}},[e._v("#")]),e._v(" "),a("code",[e._v("draw.io")]),e._v("/ "),a("code",[e._v("processon")]),e._v(" 工具绘制的时序图")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://cyi113.oss-cn-shanghai.aliyuncs.com/static/typora-user-images/sequencediagram1.png",alt:"image-20220610110349663"}})]),e._v(" "),a("h5",{attrs:{id:"优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[e._v("#")]),e._v(" 优点")]),e._v(" "),a("ul",[a("li",[e._v("可视化界面操作，上手容易")]),e._v(" "),a("li",[e._v("成型快")])]),e._v(" "),a("h5",{attrs:{id:"缺陷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺陷"}},[e._v("#")]),e._v(" 缺陷")]),e._v(" "),a("ul",[a("li",[e._v("绘制时序图过程中，需要拖动所需要的UML图形到图形区，容易出现箭头对不齐，或者图形错位等问题")]),e._v(" "),a("li",[e._v("如果需求出现变动，修改时极易影响无需修改的部分")])]),e._v(" "),a("h4",{attrs:{id:"使用-plantuml-组件绘制时序图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-plantuml-组件绘制时序图"}},[e._v("#")]),e._v(" 使用 "),a("em",[e._v("PlantUML")]),e._v(" 组件绘制时序图")]),e._v(" "),a("h5",{attrs:{id:"优点-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优点-2"}},[e._v("#")]),e._v(" 优点")]),e._v(" "),a("ul",[a("li",[e._v("使用"),a("code",[e._v("plantuml")]),e._v("生成的时序图，不需要关注布局，让你专注于业务流程")]),e._v(" "),a("li",[e._v("修改方便，只需要修改对应的逻辑即可自动生成时序图")]),e._v(" "),a("li",[e._v("通用，只需要将文本发送过去，就可以生成对应的时序图")])]),e._v(" "),a("h5",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[e._v("#")]),e._v(" 缺点")]),e._v(" "),a("ul",[a("li",[e._v("需要学习语法，对非技术人员上手有一定难度")])]),e._v(" "),a("p",[e._v("时序图脚本：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@startuml 用户注册\n\nactor 用户 as user\nparticipant "小程序" as Applets\nparticipant "中台（开放平台）" as middleground\nparticipant "中台会员服务" as memberService\nparticipant "中台CRM服务" as middlegroundCRM\nparticipant "CRM" as channelCRM \n\n\n==用户注册==\nactivate user\nuser->Applets:用户扫描二维码\n\nactivate Applets\nApplets->middleground:用户注册\n\nactivate middleground\nmiddleground->middleground:参数校验\nalt 不通过，则直接返回错误信息\nmiddleground--\x3eApplets:返回错误信息\nend\nmiddleground->memberService:异步发送mq\nactivate memberService\nmemberService->middlegroundCRM:有CRM，如果注册失败，重试3次，还失败会记录日志\nactivate middlegroundCRM\n\nalt 无CRM\nmemberService--\x3ememberService:注册会员\nmemberService--\x3emiddleground:发送mq\nmiddleground--\x3eApplets:回调小程序接口\nend\n\nmiddlegroundCRM->channelCRM:调用接口\nactivate channelCRM\nchannelCRM->channelCRM:返回结果\nchannelCRM--\x3emiddlegroundCRM:返回cid\ndeactivate channelCRM\n\nmiddlegroundCRM--\x3ememberService:注册会员，添加绑定关系\ndeactivate middlegroundCRM\n\nmemberService--\x3emiddleground:发送mq\ndeactivate memberService\n\nmiddleground--\x3eApplets:回调小程序接口\ndeactivate middleground\nApplets--\x3euser:返回信息展示给用户\ndeactivate Applets\n\n\n@enduml\n')])])]),a("p",[e._v("现在对上面的时序图进行修改：\n"),a("img",{attrs:{src:"https://cyi113.oss-cn-shanghai.aliyuncs.com/static/typora-user-images/sequencediagram6.png",alt:"image-20220610110801142"}})]),e._v(" "),a("p",[e._v("其中生成时序图的语法为:")]),e._v(" "),a("div",{staticClass:"language-uml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@startuml 用户注册\n\nactor 用户 as user\nparticipant "小程序" as Applets\nparticipant "小程序后端" as AppletsService\nparticipant "中台（开放平台）" as middleground\nparticipant "消息队列" as mq\nparticipant "中台会员服务" as memberService\nparticipant "中台CRM服务" as middlegroundCRM\nparticipant "CRM" as channelCRM\n\n\n==用户注册主流程==\nautonumber\nactivate user\nuser->Applets:用户扫描二维码\n\nactivate Applets\nApplets->AppletsService:提交用户注册信息\\n到小程序后台\nactivate AppletsService\nAppletsService->middleground:调用中台会员注册接口\n\nactivate middleground\nmiddleground->middleground:参数校验\n\nalt #Pink  不通过\n    middleground--\x3eAppletsService:返回注册失败错误信息\n    AppletsService--\x3eApplets:返回错误信息给小程序\n    Applets--\x3euser:通知用户注册失败\nelse #SkyBlue 通过\n    middleground->>mq:将用户注册信息\\n异步发送至mq\n\n    middleground--\x3eAppletsService:返回用户注册信息提交成功\n    deactivate middleground\n    AppletsService--\x3eApplets:返回成功信息给小程序\n    deactivate AppletsService\n    Applets--\x3euser:通知用户注册信息提交成功\n    deactivate Applets\nend\ndeactivate user\n\n\n==用户注册消息队列处理==\nautonumber 1\n\nmq->memberService:从消息队列中获取\\n用户注册信息\nactivate mq\nactivate memberService\nmemberService->memberService:判断有无CRM\nalt #LightBlue 无CRM\n    memberService->memberService:注册会员\nelse #SkyBlue 有CRM\n    memberService->middlegroundCRM:如果注册失败，\\n重试3次，还失败会记录日志\n    activate middlegroundCRM\n    middlegroundCRM->channelCRM:调用外部CRM接口\n    activate channelCRM\n    channelCRM--\x3emiddlegroundCRM:返回会员id\n    deactivate channelCRM\n\n    middlegroundCRM--\x3ememberService:注册会员，添加绑定关系\n    deactivate middlegroundCRM\nend\nmemberService--\x3e>mq:发送mq\ndeactivate mq\ndeactivate memberService\n\n\n==注册成功通知==\nautonumber\nmq--\x3emiddleground:将注册成功消息\\n从mq中取出\nactivate middleground\nmiddleground--\x3eAppletsService:回调小程序接口\\n返回注册成功信息\ndeactivate middleground\nactivate AppletsService\nAppletsService--\x3eApplets:展示用户注册成功信息\ndeactivate AppletsService\n\nactivate Applets\nApplets--\x3euser:通知用户注册成功\ndeactivate Applets\n\n@enduml\n')])])]),a("h5",{attrs:{id:"两版时序图源码对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#两版时序图源码对比"}},[e._v("#")]),e._v(" 两版时序图源码对比")]),e._v(" "),a("p",[e._v("​ "),a("em",[e._v("修改后")]),e._v(" "),a("img",{attrs:{src:"https://cyi113.oss-cn-shanghai.aliyuncs.com/static/typora-user-images/sequencediagram10.png",alt:"image-20220614142446503"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);